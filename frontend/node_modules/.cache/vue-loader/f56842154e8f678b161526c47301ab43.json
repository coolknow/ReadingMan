{"remainingRequest":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue?vue&type=style&index=0&id=510e566f&scoped=true&lang=scss&","dependencies":[{"path":"/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue","mtime":1656396887000},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/css-loader/dist/cjs.js","mtime":1656821616934},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1656821616997},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/postcss-loader/src/index.js","mtime":1656821616659},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/sass-loader/dist/cjs.js","mtime":1656821619560},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js","mtime":1656821619186},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js","mtime":1656821616996}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4vcGxheWVyLnNjc3MiOwo="},{"version":3,"sources":["player.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA","file":"player.vue","sourceRoot":"src/components/player","sourcesContent":["<template>\n  <div class=\"playerBox\">\n    <div @click=\"gotoCurrent\" v-if=\"playList.length\"  class=\"coverBox\">\n      <img\n        style=\"height: 50px; margin-right: 10px; border-radius: 5px\"\n        src=\"/book.jpg\"\n        alt=\"\"\n        srcset=\"\"\n      />\n      <div class=\"songName\">\n        {{ playList.length && playList[currentIndex].name }}\n      </div>\n    </div>\n    <i\n      @click=\"handlePlayMode\"\n      class=\"icon\"\n      :class=\"playMode ? 'el-icon-refresh' : 'el-icon-refresh-left'\"\n    ></i>\n    <span style=\"font-size: 12px\">{{\n      playMode ? \"列表循环\" : \"顺序播放\"\n    }}</span>\n    <i @click=\"pre\" class=\"el-icon-d-arrow-left icon\"></i>\n    <audio\n      :key=\"playList.length && playList[currentIndex]\"\n      ref=\"myAudio\"\n      style=\"margin-left: 30px\"\n      controls\n      autoplay\n    >\n      <source\n        :src=\"playList.length && playList[currentIndex].url\"\n        type=\"audio/mp3\"\n      />\n    </audio>\n    <i @click=\"next\" class=\"el-icon-d-arrow-right icon\"></i>\n    <!-- 播放列表 -->\n    <div class=\"menuBox\">\n      <i @click=\"openMenu\" class=\"el-icon-menu icon\"></i>\n      <div v-if=\"showPlayList\" class=\"menuCard\">\n        <el-card>\n          <div class=\"songList\">\n            <div\n              v-if=\"playList.length == 0\"\n              style=\"color: #888; text-align: center\"\n            >\n              列表为空~\n            </div>\n            <div\n              @click=\"handleItemClick(index)\"\n              :class=\"currentIndex == index ? 'songItemActive' : ''\"\n              v-for=\"(item, index) in playList\"\n              :key=\"index\"\n              class=\"songItem\"\n            >\n              <div class=\"songItemName\">《{{ item.name }}》</div>\n              <i\n                @click.stop=\"handleDelete(index)\"\n                style=\"color: red; cursor: pointer\"\n                class=\"el-icon-delete\"\n              ></i>\n            </div>\n          </div>\n        </el-card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      showPlayList: false,\n      playMode: false,\n    };\n  },\n  computed: {\n    ...mapState([\"userinfo\", \"playList\", \"currentIndex\"]),\n  },\n  mounted() {\n    // 监听播放完毕处理事件\n    this.$refs[\"myAudio\"].addEventListener(\"ended\", () => {\n      this.next();\n    });\n    // 从缓存中读取歌曲\n    if (window.localStorage.playList) {\n      this.$store.commit(\n        \"updatePlayList\",\n        JSON.parse(window.localStorage.playList)\n      );\n    }\n  },\n  methods: {\n    gotoCurrent() {\n      this.$router.push(\"/detail\");\n    },\n    // 播放模式（随机播放、列表循环）\n    handlePlayMode() {\n      this.playMode = !this.playMode;\n    },\n    // 上一首\n    pre() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (index == 0) {\n          index = this.playList.length - 1;\n        } else {\n          index -= 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        // 列表顺序播放\n        if (this.currentIndex == 0) {\n          this.$message.error(\"已经是第一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex - 1);\n      }\n    },\n    // 下一首\n    next() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (this.currentIndex == this.playList.length - 1) {\n          index = 0;\n        } else {\n          index += 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        if (this.currentIndex == this.playList.length - 1) {\n          this.$message.error(\"已经是最后一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex + 1);\n      }\n    },\n    // 搜藏\n    collect() {},\n    // 打开或关闭播放列表\n    openMenu() {\n      this.showPlayList = !this.showPlayList;\n    },\n    // 播放列表的点击\n    handleItemClick(index) {\n      this.$store.commit(\"updateCurrentIndex\", index);\n    },\n    // 播放列表移除歌曲\n    handleDelete(index) {\n      let deepList = [...this.playList];\n      deepList.splice(index, 1);\n      this.$store.commit(\"deletePlayerList\", { index, list: deepList });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"./player.scss\";\n</style>\n\n"]}]}