{"remainingRequest":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue","mtime":1656396887000},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js","mtime":1656821619186},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/babel-loader/lib/index.js","mtime":1656821619389},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js","mtime":1656821619186},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js","mtime":1656821616996}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkluZGV4IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1BsYXlMaXN0OiBmYWxzZSwKICAgICAgcGxheU1vZGU6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbInVzZXJpbmZvIiwgInBsYXlMaXN0IiwgImN1cnJlbnRJbmRleCJdKSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDnm5HlkKzmkq3mlL7lrozmr5XlpITnkIbkuovku7YKICAgIHRoaXMuJHJlZnNbIm15QXVkaW8iXS5hZGRFdmVudExpc3RlbmVyKCJlbmRlZCIsICgpID0+IHsKICAgICAgdGhpcy5uZXh0KCk7CiAgICB9KTsKICAgIC8vIOS7jue8k+WtmOS4reivu+WPluatjOabsgogICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UucGxheUxpc3QpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICJ1cGRhdGVQbGF5TGlzdCIsCiAgICAgICAgSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLnBsYXlMaXN0KQogICAgICApOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ290b0N1cnJlbnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZGV0YWlsIik7CiAgICB9LAogICAgLy8g5pKt5pS+5qih5byP77yI6ZqP5py65pKt5pS+44CB5YiX6KGo5b6q546v77yJCiAgICBoYW5kbGVQbGF5TW9kZSgpIHsKICAgICAgdGhpcy5wbGF5TW9kZSA9ICF0aGlzLnBsYXlNb2RlOwogICAgfSwKICAgIC8vIOS4iuS4gOmmlgogICAgcHJlKCkgewogICAgICAvLyDliJfooajlvqrnjq/mqKHlvI8KICAgICAgaWYgKHRoaXMucGxheU1vZGUpIHsKICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleDsKICAgICAgICBpZiAoaW5kZXggPT0gMCkgewogICAgICAgICAgaW5kZXggPSB0aGlzLnBsYXlMaXN0Lmxlbmd0aCAtIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGluZGV4IC09IDE7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlQ3VycmVudEluZGV4IiwgaW5kZXgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWIl+ihqOmhuuW6j+aSreaUvgogICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlt7Lnu4/mmK/nrKzkuIDpppbmrYzkuoZ+Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlQ3VycmVudEluZGV4IiwgdGhpcy5jdXJyZW50SW5kZXggLSAxKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4i+S4gOmmlgogICAgbmV4dCgpIHsKICAgICAgLy8g5YiX6KGo5b6q546v5qih5byPCiAgICAgIGlmICh0aGlzLnBsYXlNb2RlKSB7CiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXg7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09IHRoaXMucGxheUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgaW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgIH0KICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUN1cnJlbnRJbmRleCIsIGluZGV4KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPT0gdGhpcy5wbGF5TGlzdC5sZW5ndGggLSAxKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlt7Lnu4/mmK/mnIDlkI7kuIDpppbmrYzkuoZ+Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlQ3VycmVudEluZGV4IiwgdGhpcy5jdXJyZW50SW5kZXggKyAxKTsKICAgICAgfQogICAgfSwKICAgIC8vIOaQnOiXjwogICAgY29sbGVjdCgpIHt9LAogICAgLy8g5omT5byA5oiW5YWz6Zet5pKt5pS+5YiX6KGoCiAgICBvcGVuTWVudSgpIHsKICAgICAgdGhpcy5zaG93UGxheUxpc3QgPSAhdGhpcy5zaG93UGxheUxpc3Q7CiAgICB9LAogICAgLy8g5pKt5pS+5YiX6KGo55qE54K55Ye7CiAgICBoYW5kbGVJdGVtQ2xpY2soaW5kZXgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDdXJyZW50SW5kZXgiLCBpbmRleCk7CiAgICB9LAogICAgLy8g5pKt5pS+5YiX6KGo56e76Zmk5q2M5puyCiAgICBoYW5kbGVEZWxldGUoaW5kZXgpIHsKICAgICAgbGV0IGRlZXBMaXN0ID0gWy4uLnRoaXMucGxheUxpc3RdOwogICAgICBkZWVwTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImRlbGV0ZVBsYXllckxpc3QiLCB7IGluZGV4LCBsaXN0OiBkZWVwTGlzdCB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["player.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"player.vue","sourceRoot":"src/components/player","sourcesContent":["<template>\n  <div class=\"playerBox\">\n    <div @click=\"gotoCurrent\" v-if=\"playList.length\"  class=\"coverBox\">\n      <img\n        style=\"height: 50px; margin-right: 10px; border-radius: 5px\"\n        src=\"/book.jpg\"\n        alt=\"\"\n        srcset=\"\"\n      />\n      <div class=\"songName\">\n        {{ playList.length && playList[currentIndex].name }}\n      </div>\n    </div>\n    <i\n      @click=\"handlePlayMode\"\n      class=\"icon\"\n      :class=\"playMode ? 'el-icon-refresh' : 'el-icon-refresh-left'\"\n    ></i>\n    <span style=\"font-size: 12px\">{{\n      playMode ? \"列表循环\" : \"顺序播放\"\n    }}</span>\n    <i @click=\"pre\" class=\"el-icon-d-arrow-left icon\"></i>\n    <audio\n      :key=\"playList.length && playList[currentIndex]\"\n      ref=\"myAudio\"\n      style=\"margin-left: 30px\"\n      controls\n      autoplay\n    >\n      <source\n        :src=\"playList.length && playList[currentIndex].url\"\n        type=\"audio/mp3\"\n      />\n    </audio>\n    <i @click=\"next\" class=\"el-icon-d-arrow-right icon\"></i>\n    <!-- 播放列表 -->\n    <div class=\"menuBox\">\n      <i @click=\"openMenu\" class=\"el-icon-menu icon\"></i>\n      <div v-if=\"showPlayList\" class=\"menuCard\">\n        <el-card>\n          <div class=\"songList\">\n            <div\n              v-if=\"playList.length == 0\"\n              style=\"color: #888; text-align: center\"\n            >\n              列表为空~\n            </div>\n            <div\n              @click=\"handleItemClick(index)\"\n              :class=\"currentIndex == index ? 'songItemActive' : ''\"\n              v-for=\"(item, index) in playList\"\n              :key=\"index\"\n              class=\"songItem\"\n            >\n              <div class=\"songItemName\">《{{ item.name }}》</div>\n              <i\n                @click.stop=\"handleDelete(index)\"\n                style=\"color: red; cursor: pointer\"\n                class=\"el-icon-delete\"\n              ></i>\n            </div>\n          </div>\n        </el-card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      showPlayList: false,\n      playMode: false,\n    };\n  },\n  computed: {\n    ...mapState([\"userinfo\", \"playList\", \"currentIndex\"]),\n  },\n  mounted() {\n    // 监听播放完毕处理事件\n    this.$refs[\"myAudio\"].addEventListener(\"ended\", () => {\n      this.next();\n    });\n    // 从缓存中读取歌曲\n    if (window.localStorage.playList) {\n      this.$store.commit(\n        \"updatePlayList\",\n        JSON.parse(window.localStorage.playList)\n      );\n    }\n  },\n  methods: {\n    gotoCurrent() {\n      this.$router.push(\"/detail\");\n    },\n    // 播放模式（随机播放、列表循环）\n    handlePlayMode() {\n      this.playMode = !this.playMode;\n    },\n    // 上一首\n    pre() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (index == 0) {\n          index = this.playList.length - 1;\n        } else {\n          index -= 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        // 列表顺序播放\n        if (this.currentIndex == 0) {\n          this.$message.error(\"已经是第一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex - 1);\n      }\n    },\n    // 下一首\n    next() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (this.currentIndex == this.playList.length - 1) {\n          index = 0;\n        } else {\n          index += 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        if (this.currentIndex == this.playList.length - 1) {\n          this.$message.error(\"已经是最后一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex + 1);\n      }\n    },\n    // 搜藏\n    collect() {},\n    // 打开或关闭播放列表\n    openMenu() {\n      this.showPlayList = !this.showPlayList;\n    },\n    // 播放列表的点击\n    handleItemClick(index) {\n      this.$store.commit(\"updateCurrentIndex\", index);\n    },\n    // 播放列表移除歌曲\n    handleDelete(index) {\n      let deepList = [...this.playList];\n      deepList.splice(index, 1);\n      this.$store.commit(\"deletePlayerList\", { index, list: deepList });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"./player.scss\";\n</style>\n\n"]}]}