{"remainingRequest":"/Users/huhaodong/Desktop/speakBook/node_modules/babel-loader/lib/index.js!/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huhaodong/Desktop/speakBook/src/components/player/player.vue","mtime":1656396887000},{"path":"/Users/huhaodong/Desktop/speakBook/babel.config.js","mtime":1637306514000},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js","mtime":1656821619186},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/babel-loader/lib/index.js","mtime":1656821619389},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/cache-loader/dist/cjs.js","mtime":1656821619186},{"path":"/Users/huhaodong/Desktop/speakBook/node_modules/vue-loader/lib/index.js","mtime":1656821616996}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvaHVoYW9kb25nL0Rlc2t0b3Avc3BlYWtCb29rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9odWhhb2RvbmcvRGVza3RvcC9zcGVha0Jvb2svbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkluZGV4IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1BsYXlMaXN0OiBmYWxzZSwKICAgICAgcGxheU1vZGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsidXNlcmluZm8iLCAicGxheUxpc3QiLCAiY3VycmVudEluZGV4Il0pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvLyDnm5HlkKzmkq3mlL7lrozmr5XlpITnkIbkuovku7YKICAgIHRoaXMuJHJlZnNbIm15QXVkaW8iXS5hZGRFdmVudExpc3RlbmVyKCJlbmRlZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubmV4dCgpOwogICAgfSk7IC8vIOS7jue8k+WtmOS4reivu+WPluatjOabsgoKICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLnBsYXlMaXN0KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlUGxheUxpc3QiLCBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UucGxheUxpc3QpKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvdG9DdXJyZW50OiBmdW5jdGlvbiBnb3RvQ3VycmVudCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9kZXRhaWwiKTsKICAgIH0sCiAgICAvLyDmkq3mlL7mqKHlvI/vvIjpmo/mnLrmkq3mlL7jgIHliJfooajlvqrnjq/vvIkKICAgIGhhbmRsZVBsYXlNb2RlOiBmdW5jdGlvbiBoYW5kbGVQbGF5TW9kZSgpIHsKICAgICAgdGhpcy5wbGF5TW9kZSA9ICF0aGlzLnBsYXlNb2RlOwogICAgfSwKICAgIC8vIOS4iuS4gOmmlgogICAgcHJlOiBmdW5jdGlvbiBwcmUoKSB7CiAgICAgIC8vIOWIl+ihqOW+queOr+aooeW8jwogICAgICBpZiAodGhpcy5wbGF5TW9kZSkgewogICAgICAgIHZhciBpbmRleCA9IHRoaXMuY3VycmVudEluZGV4OwoKICAgICAgICBpZiAoaW5kZXggPT0gMCkgewogICAgICAgICAgaW5kZXggPSB0aGlzLnBsYXlMaXN0Lmxlbmd0aCAtIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGluZGV4IC09IDE7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUN1cnJlbnRJbmRleCIsIGluZGV4KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDliJfooajpobrluo/mkq3mlL4KICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey57uP5piv56ys5LiA6aaW5q2M5LqGfiIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDdXJyZW50SW5kZXgiLCB0aGlzLmN1cnJlbnRJbmRleCAtIDEpOwogICAgICB9CiAgICB9LAogICAgLy8g5LiL5LiA6aaWCiAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAvLyDliJfooajlvqrnjq/mqKHlvI8KICAgICAgaWYgKHRoaXMucGxheU1vZGUpIHsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleDsKCiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09IHRoaXMucGxheUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgaW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDdXJyZW50SW5kZXgiLCBpbmRleCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09IHRoaXMucGxheUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey57uP5piv5pyA5ZCO5LiA6aaW5q2M5LqGfiIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDdXJyZW50SW5kZXgiLCB0aGlzLmN1cnJlbnRJbmRleCArIDEpOwogICAgICB9CiAgICB9LAogICAgLy8g5pCc6JePCiAgICBjb2xsZWN0OiBmdW5jdGlvbiBjb2xsZWN0KCkge30sCiAgICAvLyDmiZPlvIDmiJblhbPpl63mkq3mlL7liJfooagKICAgIG9wZW5NZW51OiBmdW5jdGlvbiBvcGVuTWVudSgpIHsKICAgICAgdGhpcy5zaG93UGxheUxpc3QgPSAhdGhpcy5zaG93UGxheUxpc3Q7CiAgICB9LAogICAgLy8g5pKt5pS+5YiX6KGo55qE54K55Ye7CiAgICBoYW5kbGVJdGVtQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUl0ZW1DbGljayhpbmRleCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUN1cnJlbnRJbmRleCIsIGluZGV4KTsKICAgIH0sCiAgICAvLyDmkq3mlL7liJfooajnp7vpmaTmrYzmm7IKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKGluZGV4KSB7CiAgICAgIHZhciBkZWVwTGlzdCA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnBsYXlMaXN0KTsKCiAgICAgIGRlZXBMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiZGVsZXRlUGxheWVyTGlzdCIsIHsKICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgbGlzdDogZGVlcExpc3QKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AAEA;EACAA,aADA;EAEAC,IAFA,kBAEA;IACA;MACAC,mBADA;MAEAC;IAFA;EAIA,CAPA;EAQAC,4BACAC,kDADA,CARA;EAWAC,OAXA,qBAWA;IAAA;;IACA;IACA;MACA;IACA,CAFA,EAFA,CAKA;;IACA;MACA,mBACA,gBADA,EAEAC,wCAFA;IAIA;EACA,CAvBA;EAwBAC;IACAC,WADA,yBACA;MACA;IACA,CAHA;IAIA;IACAC,cALA,4BAKA;MACA;IACA,CAPA;IAQA;IACAC,GATA,iBASA;MACA;MACA;QACA;;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA;;QACA;MACA,CARA,MAQA;QACA;QACA;UACA;UACA;QACA;;QACA;MACA;IACA,CA3BA;IA4BA;IACAC,IA7BA,kBA6BA;MACA;MACA;QACA;;QACA;UACAD;QACA,CAFA,MAEA;UACAA;QACA;;QACA;MACA,CARA,MAQA;QACA;UACA;UACA;QACA;;QACA;MACA;IACA,CA9CA;IA+CA;IACAE,OAhDA,qBAgDA,EAhDA;IAiDA;IACAC,QAlDA,sBAkDA;MACA;IACA,CApDA;IAqDA;IACAC,eAtDA,2BAsDAJ,KAtDA,EAsDA;MACA;IACA,CAxDA;IAyDA;IACAK,YA1DA,wBA0DAL,KA1DA,EA0DA;MACA;;MACAM;MACA;QAAAN;QAAAO;MAAA;IACA;EA9DA;AAxBA","names":["name","data","showPlayList","playMode","computed","mapState","mounted","JSON","methods","gotoCurrent","handlePlayMode","pre","index","next","collect","openMenu","handleItemClick","handleDelete","deepList","list"],"sourceRoot":"src/components/player","sources":["player.vue"],"sourcesContent":["<template>\n  <div class=\"playerBox\">\n    <div @click=\"gotoCurrent\" v-if=\"playList.length\"  class=\"coverBox\">\n      <img\n        style=\"height: 50px; margin-right: 10px; border-radius: 5px\"\n        src=\"/book.jpg\"\n        alt=\"\"\n        srcset=\"\"\n      />\n      <div class=\"songName\">\n        {{ playList.length && playList[currentIndex].name }}\n      </div>\n    </div>\n    <i\n      @click=\"handlePlayMode\"\n      class=\"icon\"\n      :class=\"playMode ? 'el-icon-refresh' : 'el-icon-refresh-left'\"\n    ></i>\n    <span style=\"font-size: 12px\">{{\n      playMode ? \"列表循环\" : \"顺序播放\"\n    }}</span>\n    <i @click=\"pre\" class=\"el-icon-d-arrow-left icon\"></i>\n    <audio\n      :key=\"playList.length && playList[currentIndex]\"\n      ref=\"myAudio\"\n      style=\"margin-left: 30px\"\n      controls\n      autoplay\n    >\n      <source\n        :src=\"playList.length && playList[currentIndex].url\"\n        type=\"audio/mp3\"\n      />\n    </audio>\n    <i @click=\"next\" class=\"el-icon-d-arrow-right icon\"></i>\n    <!-- 播放列表 -->\n    <div class=\"menuBox\">\n      <i @click=\"openMenu\" class=\"el-icon-menu icon\"></i>\n      <div v-if=\"showPlayList\" class=\"menuCard\">\n        <el-card>\n          <div class=\"songList\">\n            <div\n              v-if=\"playList.length == 0\"\n              style=\"color: #888; text-align: center\"\n            >\n              列表为空~\n            </div>\n            <div\n              @click=\"handleItemClick(index)\"\n              :class=\"currentIndex == index ? 'songItemActive' : ''\"\n              v-for=\"(item, index) in playList\"\n              :key=\"index\"\n              class=\"songItem\"\n            >\n              <div class=\"songItemName\">《{{ item.name }}》</div>\n              <i\n                @click.stop=\"handleDelete(index)\"\n                style=\"color: red; cursor: pointer\"\n                class=\"el-icon-delete\"\n              ></i>\n            </div>\n          </div>\n        </el-card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      showPlayList: false,\n      playMode: false,\n    };\n  },\n  computed: {\n    ...mapState([\"userinfo\", \"playList\", \"currentIndex\"]),\n  },\n  mounted() {\n    // 监听播放完毕处理事件\n    this.$refs[\"myAudio\"].addEventListener(\"ended\", () => {\n      this.next();\n    });\n    // 从缓存中读取歌曲\n    if (window.localStorage.playList) {\n      this.$store.commit(\n        \"updatePlayList\",\n        JSON.parse(window.localStorage.playList)\n      );\n    }\n  },\n  methods: {\n    gotoCurrent() {\n      this.$router.push(\"/detail\");\n    },\n    // 播放模式（随机播放、列表循环）\n    handlePlayMode() {\n      this.playMode = !this.playMode;\n    },\n    // 上一首\n    pre() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (index == 0) {\n          index = this.playList.length - 1;\n        } else {\n          index -= 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        // 列表顺序播放\n        if (this.currentIndex == 0) {\n          this.$message.error(\"已经是第一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex - 1);\n      }\n    },\n    // 下一首\n    next() {\n      // 列表循环模式\n      if (this.playMode) {\n        let index = this.currentIndex;\n        if (this.currentIndex == this.playList.length - 1) {\n          index = 0;\n        } else {\n          index += 1;\n        }\n        this.$store.commit(\"updateCurrentIndex\", index);\n      } else {\n        if (this.currentIndex == this.playList.length - 1) {\n          this.$message.error(\"已经是最后一首歌了~\");\n          return;\n        }\n        this.$store.commit(\"updateCurrentIndex\", this.currentIndex + 1);\n      }\n    },\n    // 搜藏\n    collect() {},\n    // 打开或关闭播放列表\n    openMenu() {\n      this.showPlayList = !this.showPlayList;\n    },\n    // 播放列表的点击\n    handleItemClick(index) {\n      this.$store.commit(\"updateCurrentIndex\", index);\n    },\n    // 播放列表移除歌曲\n    handleDelete(index) {\n      let deepList = [...this.playList];\n      deepList.splice(index, 1);\n      this.$store.commit(\"deletePlayerList\", { index, list: deepList });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"./player.scss\";\n</style>\n\n"]}]}